language: r
warnings_are_errors: true
sudo: required
services:
  - docker
os: linux
before_install:
  - docker pull omnisci/core-os-cpu:latest
  - docker run -d --ipc=host -p 127.0.0.1:6278:6278 -p 127.0.0.1:6274:6274 --name=omnisci omnisci/core-os-cpu:latest
  - docker ps -a
  - docker exec -it omnisci /bin/sh -c "bin/omnisql --pass HyperInteractive"
  - \q
  - sudo apt install libboost-all-dev -qq
  - cd /home/travis/build
  - wget --continue http://apache.claz.org/thrift/0.11.0/thrift-0.11.0.tar.gz
  - tar xf thrift-0.11.0.tar.gz
  - cd thrift-0.11.0
  - CFLAGS="-fPIC" CXXFLAGS="-fPIC" ./configure --without-java --without-lua --without-python --without-php --without-ruby --without-qt4 --without-qt5 --without-erlang --without-go --without-nodejs --without-py3
  - make -s
  - sudo make install -s
  - sudo ldconfig
  - cd /home/travis/build/omnisci/ROmniSci